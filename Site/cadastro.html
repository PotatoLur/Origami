<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastrar</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header>
        <nav class="navbar_esquerda">
            <a href="index.html"><img class="logo" src="./img/logo.png" alt="logo"></a>
            <li>
                <a href="index.html">História</a>
            </li>
            <li>
                <a href="comunidade.html">Comunidade</a>
            </li>
            <li>
                <a href="#contato">Contato</a>
            </li>
        </nav>
        <nav class="navbar_direita">
            <li class="agora">
                <a href="cadastro.html">Cadastro</a>
            </li>
            <li>
                <a href="login.html">Login</a>
            </li>
        </nav>
    </header>

    <main class="cadastro">
        <div class="caixa">
            <h2>Cadastro</h2>
            <label>E-mail: </label>
            <input type="text" id="ipt_email">
            <label>Usuário: </label>
            <input type="text" id="ipt_usuario">
            <label>Senha: </label>
            <input type="text" id="ipt_senha">
            <button onclick="cadastrar()">Cadastrar</button>
        </div>
    </main>

    <footer>
        <div class="footer_descricao">
            <a href="index.html"><img class="logo" src="./img/logo.png" alt="logo"></a>
            <div class="frase">
                <p>Mundo dos origamis</p>
                <p>Descubra novos origamis</p>
                <p>Compartilhe os seus projetos</p>
            </div>
        </div>
        <div class="footer_fundador">
            <h6>Desenvolvedor</h6>
            <p>Guilherme Aoki Eguchi</p>
        </div>
        <div class="footer_informacao">
            <h6>Mais informações</h6>
            <a href="index.html">História</a>
            <a href="comunidade.html">Comunidade</a>
            <a href="cadastro.html">Cadastro</a>
            <a href="login.html">Login</a>
        </div>
        <div class="footer_contato" id="contato">
            <h6>Contato</h6>
            <p><img src="./img/email.jpg" alt="">guilherme.eguchi@sptech.school</p>
            <p><img src="./img/whatsapp.webp" alt="">(11) 97144-2227</p>
        </div>
</body>

<script>
    const ipt_email = document.querySelector('#ipt_email');
    const ipt_usuario = document.querySelector('#ipt_usuario');
    const ipt_senha = document.querySelector('#ipt_senha');

    function cadastrar() {
        if (ipt_email.value == 'aoki') {
            sessionStorage.clear();
        }
        let lista_usuario = JSON.parse(sessionStorage.getItem('lista') || '[]');
        if (ipt_email.value && ipt_usuario.value && ipt_senha.value) {
            if (ipt_email.value.includes('@') && ipt_email.value.includes('.com')) {
                if (ipt_usuario.value.length >= 6 && ipt_senha.value.length >= 6) {
                    if ((ipt_senha.value.includes('0') ||
                        ipt_senha.value.includes('1') ||
                        ipt_senha.value.includes('2') ||
                        ipt_senha.value.includes('3') ||
                        ipt_senha.value.includes('4') ||
                        ipt_senha.value.includes('5') ||
                        ipt_senha.value.includes('6') ||
                        ipt_senha.value.includes('7') ||
                        ipt_senha.value.includes('8') ||
                        ipt_senha.value.includes('9')) &&
                        (ipt_senha.value.includes('!') ||
                        ipt_senha.value.includes('@') ||
                        ipt_senha.value.includes('#') ||
                        ipt_senha.value.includes('$'))
                    ) {
                        lista_usuario.push(
                            {
                                email: ipt_email.value,
                                usuario: ipt_usuario.value,
                                senha: ipt_senha.value
                            }
                        )

                        sessionStorage.setItem('lista', JSON.stringify(lista_usuario));

                        alert(`Cadastro realizado! Seja bem vindo ${ipt_usuario.value}!`)
                        window.location = './login.html';
                    }
                    else {
                        alert('A senha precisa ter pelo menos um número e pelo menos um dos caractere especial (!, @, #, $)')
                    }
                }
                else {
                    alert('O usuário e a senha precisa ter pelo menos 6 dígitos');
                }
            }
            else {
                alert('O email precisa ter @ e .com.');
            }
        }
        else {
            alert('Preencher todos os campos!')
        }
    }    
</script>

</html>